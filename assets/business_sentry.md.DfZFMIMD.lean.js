import{_ as s,c as n,b as a,o as l}from"./chunks/framework.CUf7xJpa.js";const e=JSON.parse('{"title":"Sentryéƒ¨ç½²ä¸ä½¿ç”¨","description":"","frontmatter":{},"headers":[{"level":2,"title":"ä»‹ç»","slug":"ä»‹ç»","link":"#ä»‹ç»","children":[]},{"level":2,"title":"éƒ¨ç½²","slug":"éƒ¨ç½²","link":"#éƒ¨ç½²","children":[{"level":3,"title":"æ­¥éª¤","slug":"æ­¥éª¤","link":"#æ­¥éª¤","children":[]},{"level":3,"title":"å½“å‰sentryå¹³å°éƒ¨ç½²","slug":"å½“å‰sentryå¹³å°éƒ¨ç½²","link":"#å½“å‰sentryå¹³å°éƒ¨ç½²","children":[]},{"level":3,"title":"éƒ¨ç½²ä¸­çš„é—®é¢˜","slug":"éƒ¨ç½²ä¸­çš„é—®é¢˜","link":"#éƒ¨ç½²ä¸­çš„é—®é¢˜","children":[]}]},{"level":2,"title":"ä½¿ç”¨","slug":"ä½¿ç”¨","link":"#ä½¿ç”¨","children":[{"level":3,"title":"æ¥å…¥é‚®ç®±ğŸ“®æŠ¥è­¦","slug":"æ¥å…¥é‚®ç®±ğŸ“®æŠ¥è­¦","link":"#æ¥å…¥é‚®ç®±ğŸ“®æŠ¥è­¦","children":[]},{"level":3,"title":"sentryé€šè¿‡httpsè®¿é—®","slug":"sentryé€šè¿‡httpsè®¿é—®","link":"#sentryé€šè¿‡httpsè®¿é—®","children":[]},{"level":3,"title":"ä½¿ç”¨ä¸­çš„é—®é¢˜","slug":"ä½¿ç”¨ä¸­çš„é—®é¢˜","link":"#ä½¿ç”¨ä¸­çš„é—®é¢˜","children":[]}]},{"level":2,"title":"dockeré‡å¯","slug":"dockeré‡å¯","link":"#dockeré‡å¯","children":[{"level":3,"title":"sentry-srouce map","slug":"sentry-srouce-map","link":"#sentry-srouce-map","children":[]},{"level":3,"title":"ä¸Šä¼ æ—¥å¿—ä¿¡æ¯--æ‰‹åŠ¨ä¸ŠæŠ¥","slug":"ä¸Šä¼ æ—¥å¿—ä¿¡æ¯-æ‰‹åŠ¨ä¸ŠæŠ¥","link":"#ä¸Šä¼ æ—¥å¿—ä¿¡æ¯-æ‰‹åŠ¨ä¸ŠæŠ¥","children":[]},{"level":3,"title":"è®¾ç½®å˜é‡","slug":"è®¾ç½®å˜é‡","link":"#è®¾ç½®å˜é‡","children":[]},{"level":3,"title":"è®¾ç½®å…¨å±€å˜é‡","slug":"è®¾ç½®å…¨å±€å˜é‡","link":"#è®¾ç½®å…¨å±€å˜é‡","children":[]},{"level":3,"title":"åˆ›å»ºè­¦æŠ¥è§„åˆ™","slug":"åˆ›å»ºè­¦æŠ¥è§„åˆ™","link":"#åˆ›å»ºè­¦æŠ¥è§„åˆ™","children":[]},{"level":3,"title":"release","slug":"release","link":"#release","children":[]}]},{"level":2,"title":"åŸç†","slug":"åŸç†","link":"#åŸç†","children":[]},{"level":2,"title":"èµ„æ–™","slug":"èµ„æ–™","link":"#èµ„æ–™","children":[]}],"relativePath":"business/sentry.md","filePath":"business/sentry.md"}');const p=s({name:"business/sentry.md"},[["render",function(s,e,p,o,t,r){return l(),n("div",null,e[0]||(e[0]=[a('<h1 id="sentryéƒ¨ç½²ä¸ä½¿ç”¨" tabindex="-1">Sentryéƒ¨ç½²ä¸ä½¿ç”¨ <a class="header-anchor" href="#sentryéƒ¨ç½²ä¸ä½¿ç”¨" aria-label="Permalink to &quot;Sentryéƒ¨ç½²ä¸ä½¿ç”¨&quot;">â€‹</a></h1><h2 id="ä»‹ç»" tabindex="-1">ä»‹ç» <a class="header-anchor" href="#ä»‹ç»" aria-label="Permalink to &quot;ä»‹ç»&quot;">â€‹</a></h2><p>Sentry ä¸ºä¸€å¥—å¼€æºçš„åº”ç”¨ç›‘æ§å’Œé”™è¯¯è¿½è¸ªçš„è§£å†³æ–¹æ¡ˆã€‚è¿™å¥—è§£å†³æ–¹æ¡ˆç”±å¯¹åº”çš„å„ç§è¯­è¨€çš„SDKå’Œä¸€å¥—åºå¤§çš„æ•°æ®åå°æœåŠ¡ç»„æˆã€‚åº”ç”¨éœ€è¦é€šè¿‡ä¸ä¹‹ç»‘å®šçš„tokenæ¥å…¥Sentry SDKå®Œæˆæ•°æ®ä¸ŠæŠ¥é…ç½®ã€‚é€šè¿‡Sentry SDKçš„é…ç½®ï¼Œè¿˜å¯ä»¥ä¸ŠæŠ¥é”™è¯¯å…³è”çš„ç‰ˆæœ¬ä¿¡æ¯ã€å‘å¸ƒç¯å¢ƒã€åŒæ—¶Sentry SDKä¼šè‡ªåŠ¨æ•è·å¼‚å¸¸å‘ç”Ÿå‰çš„ç›¸å…³æ“ä½œï¼Œä¾¿äºåç»­å¼‚å¸¸è¿½è¸ªã€‚å¼‚å¸¸æ•°æ®ä¸ŠæŠ¥åˆ°æ•°æ®æœåŠ¡åï¼Œä¼šé€šè¿‡è¿‡æ»¤ã€å…³é”®ä¿¡æ¯æå–ã€å½’çº³å±•ç¤ºåœ¨æ•°æ®åå°çš„Webé¡µé¢ä¸­ å®˜æ–¹åœ°å€ï¼š<a href="https://github.com/getsentry/onpremise" target="_blank" rel="noreferrer">https://github.com/getsentry/onpremise</a></p><h2 id="éƒ¨ç½²" tabindex="-1">éƒ¨ç½² <a class="header-anchor" href="#éƒ¨ç½²" aria-label="Permalink to &quot;éƒ¨ç½²&quot;">â€‹</a></h2><p>éƒ¨ç½²é…ç½®å‚è€ƒå®˜ç½‘</p><ul><li>Docker 19.03.6+</li><li>Compose 1.28.0+</li><li>4 CPU Cores</li><li>8 GB RAM</li><li>20 GB Free Disk Space</li></ul><h3 id="æ­¥éª¤" tabindex="-1">æ­¥éª¤ <a class="header-anchor" href="#æ­¥éª¤" aria-label="Permalink to &quot;æ­¥éª¤&quot;">â€‹</a></h3><ol><li>git clone <a href="https://github.com/getsentry/onpremise.git" target="_blank" rel="noreferrer">https://github.com/getsentry/onpremise.git</a></li><li>cd onpremise</li><li>æ‰§è¡Œ./install.sh ./install.sh --skip-user-prompt</li><li>docker compose up -d</li></ol><blockquote><p>æç¤º: ç›®å‰sentryå·²ç»æ˜¯dockerå®¹å™¨åŒ–éƒ¨ç½²;å¦‚æœæˆ‘ä»¬æƒ³è¦æ•´ä½“èµ°ä¸€ä¸‹å®¹å™¨åŒ–éƒ¨ç½²çš„è¯ï¼Œéœ€è¦ä¸Šé¢çš„æ­¥éª¤åœ¨ä¸€ä¸ªlinuxçš„å®¹å™¨ä¸­æ“ä½œï¼Œç„¶åæŠŠlinuxçš„å®¹å™¨æ‰“åŒ…æˆä¸€ä¸ªæ–°çš„é•œåƒ;ç„¶ååœ¨sreä¸­æ–°å»ºä¸€ä¸ªåº”ç”¨ï¼Œç„¶åæ¨é€è¿‡å»ã€‚ä¹‹å‰å’Œé¸¿é’§ã€ç‹åšæ²Ÿé€šï¼Œ1.linuxå®¹å™¨æ‰“åŒ…æˆé•œåƒæ¯”è¾ƒå¤§ï¼Œ2ã€‚æ–°å»ºåº”ç”¨ç›¸å¯¹å¤æ‚ä¸€äº›ï¼›ç›®å‰éƒ¨ç½²åœ¨çº¿ä¸Šxxæœºå™¨ä¸­ï¼ŒäºŒçº§åŸŸå<a href="https://sentry-zl.domain/%E6%8C%87%E5%90%91" target="_blank" rel="noreferrer">https://sentry-zl.domain/æŒ‡å‘</a></p></blockquote><h3 id="å½“å‰sentryå¹³å°éƒ¨ç½²" tabindex="-1">å½“å‰sentryå¹³å°éƒ¨ç½² <a class="header-anchor" href="#å½“å‰sentryå¹³å°éƒ¨ç½²" aria-label="Permalink to &quot;å½“å‰sentryå¹³å°éƒ¨ç½²&quot;">â€‹</a></h3><p>sentryä»£ç éƒ¨ç½²åœ¨/home/self-hosted sentryä»£ç éƒ¨ç½²åœ¨/home/kooper/onpremise/</p><p>è¯´æ˜</p><ol><li>ç™»å½•çº¿ä¸ŠæœåŠ¡å™¨éœ€è¦é€šè¿‡å ¡å’æœºksop.domain-- å ¡å’æœºç”³è¯·è¯•ç”¨è¯´æ˜</li><li>çº¿ä¸Šåœ°å€<a href="https://sentry-zl.domain/" target="_blank" rel="noreferrer">https://sentry-zl.domain/</a> <a href="https://sentry-zl2.domain/" target="_blank" rel="noreferrer">https://sentry-zl2.domain/</a></li></ol><h3 id="éƒ¨ç½²ä¸­çš„é—®é¢˜" tabindex="-1">éƒ¨ç½²ä¸­çš„é—®é¢˜ <a class="header-anchor" href="#éƒ¨ç½²ä¸­çš„é—®é¢˜" aria-label="Permalink to &quot;éƒ¨ç½²ä¸­çš„é—®é¢˜&quot;">â€‹</a></h3><p>æ³¨æ„ï¼š æ‹·è´çš„æ—¶å€™éœ€è¦å…ˆæ‹·è´åˆ°æœ¬åœ°vscodeä¸­æ ¼å¼åŒ–ï¼Œå†ç²˜è´´åˆ°è¿œç«¯ï¼Œé¿å…æœ‰ä¸­æ–‡ç©ºæ ¼ç­‰å› ç´ å½±å“</p><ol><li>docker-composeç‰ˆæœ¬è¿‡ä½ï¼ˆæ”¹ç”¨docker composeï¼ˆdockerè‡ªå¸¦çš„å‘½ä»¤ï¼‰ï¼‰</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>curl -L https://github.com/docker/compose/releases/download/1.28.3/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>chmod +x /usr/local/bin/docker-compose</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>docker-compose --version</span></span></code></pre></div><ol start="2"><li>dockerä¸‹è½½å¤ªæ…¢</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>vim /etc/docker/daemon.json</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    {</span></span>\n<span class="line"><span>        &quot;registry-mirrors&quot;: [</span></span>\n<span class="line"><span>            &quot;https://registry.docker-cn.com&quot;,    //å›½å†…å®˜æ–¹é•œåƒ</span></span>\n<span class="line"><span>            &quot;https://mirrors.tuna.tsinghua.edu.cn&quot;,   //æ¸…åé•œåƒ</span></span>\n<span class="line"><span>            &quot;http://hub-mirror.c.163.com&quot;,    //ç½‘æ˜“163é•œåƒ</span></span>\n<span class="line"><span>            &quot;https://docker.mirrors.ustc.edu.cn&quot;,   //ä¸­ç§‘å¤§é•œåƒ</span></span>\n<span class="line"><span>        ]</span></span>\n<span class="line"><span>    }</span></span>\n<span class="line"><span>    // æ–°å¢æ–‡ä»¶ cron/sources.list</span></span>\n<span class="line"><span>    deb http://mirror.bjtu.edu.cn/debian bullseye main</span></span>\n<span class="line"><span>    deb http://mirror.bjtu.edu.cn/debian bullseye-updates main</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    // cron/Dockerfile </span></span>\n<span class="line"><span>    ARG BASE_IMAGE</span></span>\n<span class="line"><span>    FROM ${BASE_IMAGE}</span></span>\n<span class="line"><span>    COPY sources.list /etc/apt/sources.list</span></span>\n<span class="line"><span>    RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends cron &amp;&amp; \\</span></span>\n<span class="line"><span>        rm -r /var/lib/apt/lists/*</span></span>\n<span class="line"><span>    COPY entrypoint.sh /entrypoint.sh</span></span>\n<span class="line"><span>    ENTRYPOINT [&quot;/entrypoint.sh&quot;]</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    // .env</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    // é‡å¯docker</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    sudo systemctl daemon-reload</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    sudo systemctl restart docker3</span></span></code></pre></div><ol start="3"><li>dockerç«¯å£ä¿®æ”¹</li></ol><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>// åŸæ¥é»˜è®¤æ˜¯9000ç«¯å£æŒ‡å‘å®¹å™¨å†…çš„80ç«¯å£ï¼Œç°åœ¨10.102.119.42çš„80ç«¯å£ç›´æ¥æŒ‡å‘å®¹å™¨å†…80ç«¯å£</span></span>\n<span class="line"><span>    // .env</span></span>\n<span class="line"><span>    OMPOSE_PROJECT_NAME=sentry_onpremise</span></span>\n<span class="line"><span>    SENTRY_EVENT_RETENTION_DAYS=90</span></span>\n<span class="line"><span>    # You can either use a port number or an IP:PORT combo for SENTRY_BIND</span></span>\n<span class="line"><span>    # See https://docs.docker.com/compose/compose-file/#ports for more</span></span>\n<span class="line"><span>    SENTRY_BIND=80</span></span>\n<span class="line"><span>    # Set SENTRY_MAIL_HOST to a valid FQDN (host/domain name) to be able to send emails!</span></span>\n<span class="line"><span>    # SENTRY_MAIL_HOST=example.com</span></span>\n<span class="line"><span>    SENTRY_IMAGE=getsentry/sentry:nightly</span></span>\n<span class="line"><span>    SNUBA_IMAGE=getsentry/snuba:nightly</span></span>\n<span class="line"><span>    RELAY_IMAGE=getsentry/relay:nightly</span></span>\n<span class="line"><span>    SYMBOLICATOR_IMAGE=getsentry/symbolicator:nightly</span></span>\n<span class="line"><span>    WAL2JSON_VERSION=latest</span></span>\n<span class="line"><span>    SENTRY_EVENT_RETENTION_DAYS=30 // æ•°æ®ä¿ç•™æœ€è¿‘30å¤© å¯ä»¥ä¿®æ”¹</span></span></code></pre></div><h2 id="ä½¿ç”¨" tabindex="-1">ä½¿ç”¨ <a class="header-anchor" href="#ä½¿ç”¨" aria-label="Permalink to &quot;ä½¿ç”¨&quot;">â€‹</a></h2><h3 id="æ¥å…¥é‚®ç®±ğŸ“®æŠ¥è­¦" tabindex="-1">æ¥å…¥é‚®ç®±ğŸ“®æŠ¥è­¦ <a class="header-anchor" href="#æ¥å…¥é‚®ç®±ğŸ“®æŠ¥è­¦" aria-label="Permalink to &quot;æ¥å…¥é‚®ç®±ğŸ“®æŠ¥è­¦&quot;">â€‹</a></h3><ol><li><p>é…ç½®å®Œæˆåï¼Œå³å¯è¿›å…¥é¡µé¢<a href="https://sentry-zl.domain/" target="_blank" rel="noreferrer">https://sentry-zl.domain/</a> æ‰“å¼€é¡µé¢å¡«å…¥ä¿¡æ¯åå³å¯è¿›å…¥sentryç³»ç»Ÿ <img src="/assets/img_16.BOE2NH5f.png" alt="img_16.png"></p></li><li><p>config.ymlé…ç½®</p></li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#B392F0;">mail.backend:</span><span style="color:#9ECBFF;"> &#39;smtp&#39;</span></span>\n<span class="line"><span style="color:#B392F0;">mail.host:</span><span style="color:#9ECBFF;"> &#39;smtp.domain&#39;</span></span>\n<span class="line"><span style="color:#B392F0;">mail.port:</span><span style="color:#79B8FF;"> 25</span></span>\n<span class="line"><span style="color:#B392F0;">mail.username:</span><span style="color:#9ECBFF;"> &#39;xuzhe1@domain&#39;</span></span>\n<span class="line"><span style="color:#B392F0;">mail.password:</span><span style="color:#9ECBFF;"> &#39;*********&#39;</span></span>\n<span class="line"><span style="color:#B392F0;">mail.use-tls:</span><span style="color:#79B8FF;"> false</span></span>\n<span class="line"><span style="color:#6A737D;"># mail.use-ssl: true</span></span>\n<span class="line"><span style="color:#6A737D;"> # The email address to send on behalf of</span></span>\n<span class="line"><span style="color:#B392F0;"> mail.from:</span><span style="color:#9ECBFF;"> &#39;xuzhe1@domain&#39;</span></span></code></pre></div><ul><li>mail.backendï¼šé‚®ä»¶å‘é€æ–¹å¼ï¼›</li><li>mail.host: é‚®ä»¶å‘é€åŸŸå ï¼Œä½¿ç”¨çš„å“ªä¸ªé‚®ç®±å¯ä»¥å»è¯¥é‚®ç®±æ–‡æ¡£ä¸­æ‰¾åˆ° smtp å‘é€åŸŸåï¼›</li><li>mail.port: é‚®ä»¶å‘é€çš„ç«¯å£å·ï¼›</li><li>mail.usernameï¼šç”¨äº smtp é‚®ç®±çš„è´¦å·ï¼›</li><li>mail.passwordï¼šç”¨äº smtp é‚®ç®±çš„å¯†ç ï¼›</li><li>mail.use-tlsï¼šæ˜¯å¦ä½¿ç”¨ tls å®‰å…¨åè®®ï¼Œè¿™é‡Œå¡«å†™ true æˆ– falseï¼Œå’Œ use-ssl é…ç½®äº’æ–¥ï¼›</li><li>mail.use-sslï¼šæ˜¯å¦ä½¿ç”¨ ssl å®‰å…¨åè®®ï¼Œè¿™é‡Œå¡«å†™ true æˆ– falseï¼Œå’Œ use-tls é…ç½®äº’æ–¥ï¼›</li><li>mail.fromï¼šæ”¶åˆ°é‚®ä»¶æ—¶çš„å‘é€äººåç§°ï¼› ä¹‹åå¯ä»¥è¿›å…¥é¡µé¢æµ‹è¯•é‚®ä»¶å‘é€<a href="https://sentry-zl.domain/manage/status/mail/" target="_blank" rel="noreferrer">https://sentry-zl.domain/manage/status/mail/</a></li></ul><h3 id="sentryé€šè¿‡httpsè®¿é—®" tabindex="-1">sentryé€šè¿‡httpsè®¿é—® <a class="header-anchor" href="#sentryé€šè¿‡httpsè®¿é—®" aria-label="Permalink to &quot;sentryé€šè¿‡httpsè®¿é—®&quot;">â€‹</a></h3><p>é¦–å…ˆè¦ä¿®æ”¹ onpremise/sentry/config.yml system.url-prefix é…ç½®ï¼Œå°†å…¶è®¾ç½®ä¸ºæˆ‘ä»¬è®¿é—®çš„ Sentry åŸŸåã€‚ url-prefix ç»„æˆäº†é¡¹ç›®çš„ DSN åœ°å€ï¼Œä¸€å®šè¦ä¿è¯æ ¼å¼æ­£ç¡®ã€‚ <code>system.internal-url-prefix: &#39;https://sentry-zl.domain&#39;</code> ç„¶åæ˜¯ /sentry/sentry.conf.py æ–‡ä»¶ä¸‹çš„ SSL/TLS é…ç½®ï¼Œå°†åŸæ¥æ³¨é‡Šçš„éƒ¨åˆ†å…¨éƒ¨æ‰“å¼€ã€‚</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span>###########</span></span>\n<span class="line"><span># SSL/TLS #</span></span>\n<span class="line"><span>###########</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span># If you&#39;re using a reverse SSL proxy, you should enable the X-Forwarded-Proto</span></span>\n<span class="line"><span># header and enable the settings below</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>SECURE_PROXY_SSL_HEADER = (&#39;HTTP_X_FORWARDED_PROTO&#39;, &#39;https&#39;)</span></span>\n<span class="line"><span>SESSION_COOKIE_SECURE = True</span></span>\n<span class="line"><span>CSRF_COOKIE_SECURE = True</span></span>\n<span class="line"><span>SOCIAL_AUTH_REDIRECT_IS_HTTPS = True</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span># End of SSL/TLS settings</span></span></code></pre></div><h3 id="ä½¿ç”¨ä¸­çš„é—®é¢˜" tabindex="-1">ä½¿ç”¨ä¸­çš„é—®é¢˜ <a class="header-anchor" href="#ä½¿ç”¨ä¸­çš„é—®é¢˜" aria-label="Permalink to &quot;ä½¿ç”¨ä¸­çš„é—®é¢˜&quot;">â€‹</a></h3><p><img src="/assets/img_17.DM-pZrRG.png" alt="img_17.png"></p><p>orgéœ€è¦å’Œsentryé‡Œé¢çš„å¯¹åº”</p><h2 id="dockeré‡å¯" tabindex="-1">dockeré‡å¯ <a class="header-anchor" href="#dockeré‡å¯" aria-label="Permalink to &quot;dockeré‡å¯&quot;">â€‹</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#9ECBFF;"> compose</span><span style="color:#9ECBFF;"> down</span></span>\n<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#9ECBFF;"> compose</span><span style="color:#9ECBFF;"> build</span></span>\n<span class="line"><span style="color:#B392F0;">docker</span><span style="color:#9ECBFF;"> compose</span><span style="color:#9ECBFF;"> up</span><span style="color:#79B8FF;"> -d</span></span></code></pre></div><p>é¡¹ç›®æ¥å…¥ Sentry é…ç½®åº”åœ¨åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸä¸­å°½æ—©è¿›è¡Œã€‚å®Œæˆæ­¤æ“ä½œåï¼ŒSentry çš„ JavaScript SDK ä¼šæ•è·æ‰€æœ‰æœªå¤„ç†çš„å¼‚å¸¸å’Œäº‹åŠ¡</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#B392F0;">npm</span><span style="color:#9ECBFF;"> install</span><span style="color:#79B8FF;"> --save</span><span style="color:#9ECBFF;"> @sentry/vue</span><span style="color:#9ECBFF;"> @sentry/tracing</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#B392F0;">Sentry.init(</span><span style="color:#9ECBFF;">{</span></span>\n<span class="line"><span style="color:#B392F0;">  //</span><span style="color:#9ECBFF;"> Sentry</span><span style="color:#9ECBFF;"> é¡¹ç›®çš„</span><span style="color:#9ECBFF;"> dsnï¼Œå¯ä»é¡¹ç›®è®¾ç½®ä¸­è·å–</span></span>\n<span class="line"><span style="color:#B392F0;">  dsn:</span><span style="color:#9ECBFF;"> &#39;https://23d1e539ef6c4cb6b14937fead1bf2ff@sentry-zl.domain/2&#39;,</span></span>\n<span class="line"><span style="color:#B392F0;">  //</span><span style="color:#9ECBFF;"> åˆå§‹å‚æ•°é…ç½®å†…å®¹</span></span>\n<span class="line"><span style="color:#B392F0;">  integrations:</span><span style="color:#E1E4E8;"> [new </span><span style="color:#9ECBFF;">Integrations.BrowserTracing</span><span style="color:#E1E4E8;">(</span></span>\n<span class="line"><span style="color:#B392F0;">      routingInstrumentation:</span><span style="color:#9ECBFF;"> Sentry.vueRouterInstrumentation</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">router</span><span style="color:#E1E4E8;">)</span><span style="color:#9ECBFF;">,</span></span>\n<span class="line"><span style="color:#B392F0;">      tracingOrigins:</span><span style="color:#E1E4E8;"> [</span><span style="color:#9ECBFF;">&quot;localhost&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;my-site-url.com&quot;,</span><span style="color:#9ECBFF;"> /^</span><span style="color:#79B8FF;">\\/</span><span style="color:#9ECBFF;">/],</span></span>\n<span class="line"><span style="color:#E1E4E8;">  )</span><span style="color:#9ECBFF;">],</span></span>\n<span class="line"><span style="color:#B392F0;">  //</span><span style="color:#9ECBFF;"> è§¦å‘å¼‚å¸¸åå‘é€ç»™</span><span style="color:#9ECBFF;"> Sentry</span><span style="color:#9ECBFF;"> çš„æ¦‚ç‡</span></span>\n<span class="line"><span style="color:#B392F0;">  tracesSampleRate:</span><span style="color:#9ECBFF;"> 1.0,</span></span>\n<span class="line"><span style="color:#B392F0;">  //</span><span style="color:#9ECBFF;"> æ§åˆ¶åº”æ•è·çš„é¢åŒ…å±‘</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">è¡Œä¸ºæ ˆ</span><span style="color:#E1E4E8;">)</span><span style="color:#9ECBFF;">çš„æ€»é‡</span></span>\n<span class="line"><span style="color:#B392F0;">  maxBreadcrumbs:</span><span style="color:#9ECBFF;"> 20,</span></span>\n<span class="line"><span style="color:#B392F0;">  //</span><span style="color:#9ECBFF;"> è§„å®šä¸Šä¸‹æ–‡æ•°æ®ç»“æ„çš„æ·±åº¦ï¼Œé»˜è®¤ä¸º</span><span style="color:#79B8FF;"> 3</span></span>\n<span class="line"><span style="color:#B392F0;">  normalizeDepth:</span><span style="color:#9ECBFF;"> 100,</span></span>\n<span class="line"><span style="color:#B392F0;">  //</span><span style="color:#9ECBFF;"> ç‰ˆæœ¬ä¿¡æ¯</span></span>\n<span class="line"><span style="color:#B392F0;">  release:</span><span style="color:#9ECBFF;"> &quot;common@1.0.0&quot;,</span></span>\n<span class="line"><span style="color:#B392F0;">  //</span><span style="color:#9ECBFF;"> ç¯å¢ƒä¿¡æ¯</span></span>\n<span class="line"><span style="color:#B392F0;">  environment:</span><span style="color:#9ECBFF;"> process.env.NODE_ENV,</span></span>\n<span class="line"><span style="color:#B392F0;">  //</span><span style="color:#9ECBFF;"> é’©å­å‡½æ•°ï¼Œåœ¨æ¯æ¬¡å‘é€</span><span style="color:#9ECBFF;"> event</span><span style="color:#9ECBFF;"> å‰è§¦å‘</span></span>\n<span class="line"><span style="color:#B392F0;">  beforeSend(event</span><span style="color:#E1E4E8;">) {</span></span>\n<span class="line"><span style="color:#B392F0;">    //</span><span style="color:#9ECBFF;"> ç½‘é¡µåº”ç”¨åˆ·æ–°åè®¾ç½®çš„å˜é‡ä¼šæ¶ˆå¤±ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©åœ¨</span><span style="color:#9ECBFF;"> beforeSend</span><span style="color:#9ECBFF;"> è§¦å‘æ—¶æ’å…¥ç”¨æˆ·ä¿¡æ¯</span></span>\n<span class="line"><span style="color:#B392F0;">    event.user</span><span style="color:#9ECBFF;"> =</span><span style="color:#9ECBFF;"> {</span></span>\n<span class="line"><span style="color:#B392F0;">      userNick:</span><span style="color:#9ECBFF;"> &quot;xz&quot;,</span></span>\n<span class="line"><span style="color:#E1E4E8;">    };</span></span>\n<span class="line"><span style="color:#F97583;">    return</span><span style="color:#9ECBFF;"> event</span><span style="color:#E1E4E8;">;</span></span>\n<span class="line"><span style="color:#E1E4E8;">  },</span></span>\n<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><h3 id="sentry-srouce-map" tabindex="-1">sentry-srouce map <a class="header-anchor" href="#sentry-srouce-map" aria-label="Permalink to &quot;sentry-srouce map&quot;">â€‹</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">//.npmrc</span></span>\n<span class="line"><span style="color:#E1E4E8;">sentrycli_cdnurl</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">https</span><span style="color:#E1E4E8;">:</span><span style="color:#6A737D;">//npm.taobao.org/mirrors/sentry-cli</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#6A737D;">// vue.config.js</span></span>\n<span class="line"><span style="color:#F97583;">const</span><span style="color:#79B8FF;"> SentryCliPlugin</span><span style="color:#F97583;"> =</span><span style="color:#B392F0;"> require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;@sentry/webpack-plugin&#39;</span><span style="color:#E1E4E8;">);</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583;">new</span><span style="color:#B392F0;"> SentryCliPlugin</span><span style="color:#E1E4E8;">({</span></span>\n<span class="line"><span style="color:#E1E4E8;">    include: </span><span style="color:#9ECBFF;">&#39;./dist&#39;</span><span style="color:#E1E4E8;">,</span></span>\n<span class="line"><span style="color:#E1E4E8;">    ignoreFile: </span><span style="color:#9ECBFF;">&#39;.gitignore&#39;</span><span style="color:#E1E4E8;">,</span></span>\n<span class="line"><span style="color:#E1E4E8;">    release: </span><span style="color:#9ECBFF;">&#39;production@1.2.0&#39;</span><span style="color:#E1E4E8;">,</span></span>\n<span class="line"><span style="color:#E1E4E8;">    ignore: [</span><span style="color:#9ECBFF;">&#39;node_modules&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;webpack.config.js&#39;</span><span style="color:#E1E4E8;">],</span></span>\n<span class="line"><span style="color:#E1E4E8;">    configFile: </span><span style="color:#9ECBFF;">&#39;.sentryclirc&#39;</span><span style="color:#E1E4E8;">,</span></span>\n<span class="line"><span style="color:#E1E4E8;">    urlPrefix: </span><span style="color:#9ECBFF;">&#39;~/&#39;</span></span>\n<span class="line"><span style="color:#E1E4E8;">})</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#6A737D;">// .sentryclirc</span></span>\n<span class="line"><span style="color:#E1E4E8;">[auth]</span></span>\n<span class="line"><span style="color:#E1E4E8;">token</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">c32f47d178064adeb3736742af42c34ebedf21aed43649bbb3d253a419e5c092</span></span>\n<span class="line"></span>\n<span class="line"></span>\n<span class="line"><span style="color:#E1E4E8;">[defaults]</span></span>\n<span class="line"><span style="color:#E1E4E8;">url</span><span style="color:#F97583;">=</span><span style="color:#B392F0;">https</span><span style="color:#E1E4E8;">:</span><span style="color:#6A737D;">//sentry-zl.domain</span></span>\n<span class="line"><span style="color:#E1E4E8;">org</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">kso</span></span>\n<span class="line"><span style="color:#E1E4E8;">project</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">kso</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">zl</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">pc</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#6A737D;">// package.json</span></span>\n<span class="line"><span style="color:#9ECBFF;">&quot;build&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;vue-cli-service build &amp;&amp; rm -fr ./dist/js/*.map&quot;</span><span style="color:#E1E4E8;">,</span></span></code></pre></div><h3 id="ä¸Šä¼ æ—¥å¿—ä¿¡æ¯-æ‰‹åŠ¨ä¸ŠæŠ¥" tabindex="-1">ä¸Šä¼ æ—¥å¿—ä¿¡æ¯--æ‰‹åŠ¨ä¸ŠæŠ¥ <a class="header-anchor" href="#ä¸Šä¼ æ—¥å¿—ä¿¡æ¯-æ‰‹åŠ¨ä¸ŠæŠ¥" aria-label="Permalink to &quot;ä¸Šä¼ æ—¥å¿—ä¿¡æ¯--æ‰‹åŠ¨ä¸ŠæŠ¥&quot;">â€‹</a></h3><p>æœ‰æ—¶æˆ‘ä»¬ä¸ä»…ä»…è¦æ”¶é›†å¼‚å¸¸ä¿¡æ¯ï¼Œè¿˜éœ€è¦åœ¨é¡µé¢ä¸­æ‰“ log æ¥æ”¶é›†é¡µé¢è¿è¡Œæ•°æ®ï¼Œè¿™æ—¶å¯ä»¥ç”¨ Sentry.captureMessage(err[, obj])Â apiï¼Œè¿›è¡Œä¼ è¾“æ—¥å¿—ã€‚ä½¿ç”¨æ–¹æ³•ä¸ captureException ä¸€è‡´ï¼Œå»ºè®®å°† level è®¾ç½®ä¸º Infoï¼Œä¾¿äºä¸å¼‚å¸¸åŒºåˆ†å¼€æ¥ï¼Œé¿å…è§¦å‘æˆ‘ä»¬è®¾ç½®çš„å¼‚å¸¸è­¦æŠ¥ã€‚</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">Sentry.</span><span style="color:#B392F0;">captureMessage</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Something went fundamentally wrong&quot;</span><span style="color:#E1E4E8;">, {</span></span>\n<span class="line"><span style="color:#E1E4E8;">  contexts: {</span></span>\n<span class="line"><span style="color:#E1E4E8;">    text: {</span></span>\n<span class="line"><span style="color:#E1E4E8;">      hahah: </span><span style="color:#79B8FF;">22</span><span style="color:#E1E4E8;">,</span></span>\n<span class="line"><span style="color:#E1E4E8;">    },</span></span>\n<span class="line"><span style="color:#E1E4E8;">  },</span></span>\n<span class="line"><span style="color:#E1E4E8;">  level: Sentry.Severity.Info,</span></span>\n<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><h3 id="è®¾ç½®å˜é‡" tabindex="-1">è®¾ç½®å˜é‡ <a class="header-anchor" href="#è®¾ç½®å˜é‡" aria-label="Permalink to &quot;è®¾ç½®å˜é‡&quot;">â€‹</a></h3><p>æ•æ‰å¼‚å¸¸è¿˜éœ€è¦é‡‡é›†ç”¨æˆ·ä¿¡æ¯ï¼Œåœ¨ç”¨æˆ·ç™»å½•åéœ€è¦é€šè¿‡ setUser è®¾ç½®ä¸€ä¸‹ç”¨æˆ·ä¿¡æ¯å…¨å±€å˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤º</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">Sentry.</span><span style="color:#B392F0;">setUser</span><span style="color:#E1E4E8;">({</span></span>\n<span class="line"><span style="color:#E1E4E8;">    tenant: {</span></span>\n<span class="line"><span style="color:#E1E4E8;">        code: </span><span style="color:#79B8FF;">12345</span><span style="color:#E1E4E8;">,</span></span>\n<span class="line"><span style="color:#E1E4E8;">        name: </span><span style="color:#9ECBFF;">&#39;æµ‹è¯•å…¬å¸&#39;</span><span style="color:#E1E4E8;">,</span></span>\n<span class="line"><span style="color:#E1E4E8;">        _id: </span><span style="color:#79B8FF;">12345</span></span>\n<span class="line"><span style="color:#E1E4E8;">    },</span></span>\n<span class="line"><span style="color:#E1E4E8;">    orgAccount: {</span></span>\n<span class="line"><span style="color:#E1E4E8;">        _id: </span><span style="color:#79B8FF;">54321</span><span style="color:#E1E4E8;">,</span></span>\n<span class="line"><span style="color:#E1E4E8;">        orgName: </span><span style="color:#9ECBFF;">&#39;æ˜¯æœºæ„å•¦&#39;</span></span>\n<span class="line"><span style="color:#E1E4E8;">    },</span></span>\n<span class="line"><span style="color:#E1E4E8;">    user: {</span></span>\n<span class="line"><span style="color:#E1E4E8;">        _id: </span><span style="color:#9ECBFF;">&#39;8910JQ&#39;</span><span style="color:#E1E4E8;">,</span></span>\n<span class="line"><span style="color:#E1E4E8;">        loginName: </span><span style="color:#9ECBFF;">&#39;æµ‹è¯•äººå‘˜å°Q&#39;</span></span>\n<span class="line"><span style="color:#E1E4E8;">    } </span></span>\n<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre></div><p>é€šè¿‡ beforeSnd æ’å…¥ç”¨æˆ·ä¿¡æ¯</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">Sentry.</span><span style="color:#B392F0;">init</span><span style="color:#E1E4E8;">({</span></span>\n<span class="line"><span style="color:#F97583;">    ...</span><span style="color:#E1E4E8;">,</span></span>\n<span class="line"><span style="color:#6A737D;"> \t  // é’©å­å‡½æ•°ï¼Œåœ¨æ¯æ¬¡å‘é€ event å‰è§¦å‘</span></span>\n<span class="line"><span style="color:#B392F0;">    beforeSend</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">event</span><span style="color:#E1E4E8;">) {</span></span>\n<span class="line"><span style="color:#6A737D;">        // åœ¨è¿™é‡Œå¯æ ¹æ®ä¸šåŠ¡æƒ…å†µå‘é€ç”¨æˆ·ä¿¡æ¯</span></span>\n<span class="line"><span style="color:#E1E4E8;">        event.user </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#E1E4E8;">            userNick: </span><span style="color:#9ECBFF;">&#39;xiaohu&#39;</span></span>\n<span class="line"><span style="color:#E1E4E8;">        };</span></span>\n<span class="line"><span style="color:#F97583;">        return</span><span style="color:#E1E4E8;"> event;</span></span>\n<span class="line"><span style="color:#E1E4E8;">    }</span></span>\n<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><h3 id="è®¾ç½®å…¨å±€å˜é‡" tabindex="-1">è®¾ç½®å…¨å±€å˜é‡ <a class="header-anchor" href="#è®¾ç½®å…¨å±€å˜é‡" aria-label="Permalink to &quot;è®¾ç½®å…¨å±€å˜é‡&quot;">â€‹</a></h3><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">// ä»¥ä¸‹æ˜¯ Sentry å®šä¹‰çš„å…¨å±€å˜é‡ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ Sentry api è®¾ç½®</span></span>\n<span class="line"><span style="color:#E1E4E8;">Sentry.</span><span style="color:#B392F0;">setUser</span><span style="color:#E1E4E8;">(object);</span></span>\n<span class="line"><span style="color:#E1E4E8;">Sentry.</span><span style="color:#B392F0;">tags</span><span style="color:#E1E4E8;">(object);</span></span>\n<span class="line"><span style="color:#E1E4E8;">Sentry.</span><span style="color:#B392F0;">extra</span><span style="color:#E1E4E8;">(object);</span></span>\n<span class="line"><span style="color:#E1E4E8;">Sentry.</span><span style="color:#B392F0;">level</span><span style="color:#E1E4E8;">(object);</span></span>\n<span class="line"><span style="color:#E1E4E8;">Sentry.</span><span style="color:#B392F0;">fingerprint</span><span style="color:#E1E4E8;">(object);</span></span>\n<span class="line"><span style="color:#6A737D;">// é€šè¿‡ setContextï¼Œè®¾ç½® key å€¼ï¼Œå¯è‡ªå®šä¹‰éšäº‹ä»¶ä¼ é€’çš„å˜é‡å</span></span>\n<span class="line"><span style="color:#E1E4E8;">Sentry.</span><span style="color:#B392F0;">setContext</span><span style="color:#E1E4E8;">(key, context);</span></span></code></pre></div><h3 id="åˆ›å»ºè­¦æŠ¥è§„åˆ™" tabindex="-1">åˆ›å»ºè­¦æŠ¥è§„åˆ™ <a class="header-anchor" href="#åˆ›å»ºè­¦æŠ¥è§„åˆ™" aria-label="Permalink to &quot;åˆ›å»ºè­¦æŠ¥è§„åˆ™&quot;">â€‹</a></h3><p>æ‚¨å¯ä»¥ä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºå„ç§è­¦æŠ¥è§„åˆ™ï¼Œå¹¶è®© Sentry çŸ¥é“æ‚¨å¸Œæœ›åœ¨åº”ç”¨ç¨‹åºä¸­å‘ç”Ÿé”™è¯¯æ—¶é€šçŸ¥çš„æ—¶é—´(when)ã€æ–¹å¼(how)å’Œå¯¹è±¡(whom)ã€‚ <a href="https://juejin.cn/post/7007607369962094599#heading-4" target="_blank" rel="noreferrer">https://juejin.cn/post/7007607369962094599#heading-4</a></p><h3 id="release" tabindex="-1">release <a class="header-anchor" href="#release" aria-label="Permalink to &quot;release&quot;">â€‹</a></h3><p>å…¶ä¸­ä¸€ç§æ–¹å¼åœ¨source mapä¸Šä¼ çš„æ—¶å€™åˆ›å»º, å¦ä¸€ç§è„šæ‰‹æ¶å¯ä»¥åˆ›å»º sentry-cliï¼Ÿ</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">new</span><span style="color:#B392F0;"> SentryCliPlugin</span><span style="color:#E1E4E8;">({</span></span>\n<span class="line"><span style="color:#E1E4E8;">    include: </span><span style="color:#9ECBFF;">&#39;./dist&#39;</span><span style="color:#E1E4E8;">,</span></span>\n<span class="line"><span style="color:#E1E4E8;">    ignoreFile: </span><span style="color:#9ECBFF;">&#39;.gitignore&#39;</span><span style="color:#E1E4E8;">,</span></span>\n<span class="line"><span style="color:#E1E4E8;">    release: process.env.</span><span style="color:#79B8FF;">RELEASE_VERSION</span><span style="color:#E1E4E8;">,</span></span>\n<span class="line"><span style="color:#E1E4E8;">    ignore: [</span><span style="color:#9ECBFF;">&#39;node_modules&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;vue.config.js&#39;</span><span style="color:#E1E4E8;">],</span></span>\n<span class="line"><span style="color:#E1E4E8;">    configFile: </span><span style="color:#9ECBFF;">&#39;.sentryclirc&#39;</span><span style="color:#E1E4E8;">,</span></span>\n<span class="line"><span style="color:#E1E4E8;">    urlPrefix: </span><span style="color:#9ECBFF;">&#39;~/&#39;</span><span style="color:#6A737D;"> // éœ€è¦å’ŒpublicPathä¿æŒä¸€è‡´</span></span>\n<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre></div><h2 id="åŸç†" tabindex="-1">åŸç† <a class="header-anchor" href="#åŸç†" aria-label="Permalink to &quot;åŸç†&quot;">â€‹</a></h2><p>å‰ç«¯æ•è·å¼‚å¸¸åˆ†ä¸ºå…¨å±€æ•è·å’Œå•ç‚¹æ•è· â€¢ å…¨å±€æ•è·ä»£ç é›†ä¸­ï¼Œæ˜“äºç®¡ç† â€¢ å•ç‚¹æ•è·ä½œä¸ºè¡¥å……ï¼Œå¯¹æŸäº›ç‰¹æ®Šæƒ…å†µè¿›è¡Œæ•è·ï¼Œä½†åˆ†æ•£ï¼Œä¸åˆ©äºç®¡ç†</p><ol><li>å…¨å±€æ•è· â—¦ é€šè¿‡å…¨å±€çš„æ¥å£ï¼Œå°†æ•è·ä»£ç é›†ä¸­å†™åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œå¯ä»¥åˆ©ç”¨çš„æ¥å£åˆ â–ª window.addEventListener(&#39;error&#39;) â–ª window.addEventListener(&#39;unhandledrejection&#39;) â–ª document.addEventListener(&#39;click&#39;) â–ª ç­‰ â—¦ æ¡†æ¶çº§åˆ«çš„å…¨å±€ç›‘å¬ â–ª ä¾‹å¦‚axiosä¸­ä½¿ç”¨interceptorè¿›è¡Œæ‹¦å‡» â–ª vueã€reactéƒ½æœ‰è‡ªå·±çš„é”™è¯¯é‡‡é›†æ¥å£ â—¦ é€šè¿‡å¯¹å…¨å±€å‡½æ•°è¿›è¡Œå°è£…åŒ…è£¹ï¼Œå®ç°åœ¨åœ¨è°ƒç”¨è¯¥å‡½æ•°æ—¶è‡ªåŠ¨æ•è·å¼‚å¸¸ â—¦ å¯¹å®ä¾‹æ–¹æ³•é‡å†™(Patch), åœ¨åŸæœ‰åŠŸèƒ½åŸºç¡€ä¸ŠåŒ…è£¹ä¸€å±‚ â–ª ä¾‹å¦‚å¯¹setTimeoutè¿›è¡Œé‡å†™ï¼Œåœ¨ä½¿ç”¨æ–¹æ³•ä¸å˜çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ•è·å¼‚å¸¸</li><li>å•ç‚¹æ•è· â—¦ åœ¨ä¸šåŠ¡ä»£ç ä¸­å¯¹å•ä¸ªä»£ç å¿«è¿›è¡ŒåŒ…è£¹ï¼Œæ´»åœ¨é€»è¾‘æµç¨‹ä¸­å¤§ç‚¹ï¼Œå®ç°æœ‰é’ˆå¯¹æ€§çš„å¼‚å¸¸æ•è· â—¦ trye-catch â—¦ ä¸“é—¨å†™ä¸€ä¸ªå‡½æ•°æ¥æ”¶é›†å¼‚å¸¸ä¿¡æ¯ï¼Œåœ¨å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œè°ƒç”¨è¯¥å‡½æ•° â—¦ ä¸“é—¨å†™ä¸€ä¸ªå‡½æ•°æ¥åŒ…è£¹å…¶ä»–å‡½æ•°ï¼Œå¾—åˆ°ä¸€ä¸ªæ–°å‡½æ•°ï¼Œè¯¥æ–°å‡½æ•°è¿è¡Œç»“æœå’ŒåŸå‡½æ•°ä¸€æ¨¡ä¸€æ ·ï¼Œåªæ˜¯åœ¨å‘ç”Ÿå¼‚å¸¸æ—¶å¯ä»¥æ•è·å¼‚å¸¸ å…·ä½“æŸ¥çœ‹æºç å§....</li></ol><h2 id="èµ„æ–™" tabindex="-1">èµ„æ–™ <a class="header-anchor" href="#èµ„æ–™" aria-label="Permalink to &quot;èµ„æ–™&quot;">â€‹</a></h2><ul><li><a href="https://juejin.cn/post/7007607369962094599#heading-4" target="_blank" rel="noreferrer">Sentry Web å‰ç«¯ç›‘æ§ - å®˜æ–¹æœ€ä½³å®è·µæ•™ç¨‹</a></li><li><a href="https://juejin.cn/post/6974424800563298341" target="_blank" rel="noreferrer">åŸºäºSentryæ­å»ºå‰ç«¯å¼‚å¸¸ç›‘æ§ç³»ç»Ÿ</a></li></ul>',58)]))}]]);export{e as __pageData,p as default};
