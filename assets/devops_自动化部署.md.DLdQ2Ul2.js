import{_ as s,c as a,b as n,o as l}from"./chunks/framework.CUf7xJpa.js";const o=JSON.parse('{"title":"自动化部署","description":"","frontmatter":{},"headers":[{"level":2,"title":"登录","slug":"登录","link":"#登录","children":[]},{"level":2,"title":"安装shell expect","slug":"安装shell-expect","link":"#安装shell-expect","children":[]}],"relativePath":"devops/自动化部署.md","filePath":"devops/自动化部署.md"}');const e=s({name:"devops/自动化部署.md"},[["render",function(s,o,e,p,t,c){return l(),a("div",null,o[0]||(o[0]=[n('<h1 id="自动化部署" tabindex="-1">自动化部署 <a class="header-anchor" href="#自动化部署" aria-label="Permalink to &quot;自动化部署&quot;">​</a></h1><h2 id="登录" tabindex="-1">登录 <a class="header-anchor" href="#登录" aria-label="Permalink to &quot;登录&quot;">​</a></h2><h2 id="安装shell-expect" tabindex="-1">安装shell expect <a class="header-anchor" href="#安装shell-expect" aria-label="Permalink to &quot;安装shell expect&quot;">​</a></h2><ul><li><p>linux <code>yum install expect</code></p></li><li><p>mac <code>brew install expect</code></p></li><li><p>问题</p></li></ul><ol><li>brew安装失败问题 <code>Running Homebrew as root is extremely dangerous and no longer supported.</code></li><li>解决方法</li></ol><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#B392F0;">$</span><span style="color:#9ECBFF;"> sudo</span><span style="color:#9ECBFF;"> chown</span><span style="color:#79B8FF;"> -R</span><span style="color:#9ECBFF;"> `</span><span style="color:#B392F0;">whoami</span><span style="color:#9ECBFF;">`</span><span style="color:#B392F0;"> /usr/local/Homebrew/</span></span>\n<span class="line"><span style="color:#B392F0;">$</span><span style="color:#9ECBFF;"> sudo</span><span style="color:#9ECBFF;"> chown</span><span style="color:#79B8FF;"> -R</span><span style="color:#E1E4E8;"> $(</span><span style="color:#B392F0;">whoami</span><span style="color:#E1E4E8;">) $(</span><span style="color:#B392F0;">brew</span><span style="color:#79B8FF;"> --prefix</span><span style="color:#E1E4E8;">)</span><span style="color:#9ECBFF;">/</span><span style="color:#79B8FF;">*</span></span>\n<span class="line"><span style="color:#B392F0;">$</span><span style="color:#9ECBFF;"> sudo</span><span style="color:#9ECBFF;"> mkdir</span><span style="color:#9ECBFF;"> /usr/local/Frameworks</span></span>\n<span class="line"><span style="color:#B392F0;">$</span><span style="color:#9ECBFF;"> sudo</span><span style="color:#9ECBFF;"> chown</span><span style="color:#79B8FF;"> -R</span><span style="color:#9ECBFF;"> `</span><span style="color:#B392F0;">whoami</span><span style="color:#9ECBFF;">`</span><span style="color:#B392F0;"> /usr/local/Frameworks/</span></span></code></pre></div><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">#! /usr/bin/expect</span></span>\n<span class="line"><span style="color:#B392F0;">spawn</span><span style="color:#9ECBFF;"> ./login72.sh</span></span>\n<span class="line"><span style="color:#B392F0;">send</span><span style="color:#9ECBFF;"> &quot;cd /home/xxx/\\r&quot;</span></span>\n<span class="line"><span style="color:#B392F0;">expect</span><span style="color:#9ECBFF;"> &quot;*root@*&quot;</span></span>\n<span class="line"><span style="color:#B392F0;">send</span><span style="color:#9ECBFF;"> &quot;git pull\\r&quot;</span></span>\n<span class="line"><span style="color:#B392F0;">expect</span><span style="color:#9ECBFF;"> &quot;*Username for*&quot;</span></span>\n<span class="line"><span style="color:#B392F0;">send</span><span style="color:#9ECBFF;"> &quot;xxx\\r&quot;</span></span>\n<span class="line"><span style="color:#B392F0;">expect</span><span style="color:#9ECBFF;"> &quot;*Password for*&quot;</span></span>\n<span class="line"><span style="color:#B392F0;">send</span><span style="color:#9ECBFF;"> &quot;xxx\\r&quot;</span></span>\n<span class="line"><span style="color:#B392F0;">expect</span><span style="color:#9ECBFF;"> &quot;*root@*&quot;</span></span>\n<span class="line"><span style="color:#B392F0;">send</span><span style="color:#9ECBFF;"> &quot;npm run build\\r&quot;</span></span>\n<span class="line"><span style="color:#B392F0;">expect</span><span style="color:#9ECBFF;"> &quot;*root@*&quot;</span></span>\n<span class="line"><span style="color:#B392F0;">send</span><span style="color:#9ECBFF;"> &quot;pm2 restart node\\r&quot;</span></span>\n<span class="line"><span style="color:#B392F0;">interact</span></span></code></pre></div>',7)]))}]]);export{o as __pageData,e as default};
