import{_ as s,c as n,b as a,o as l}from"./chunks/framework.CUf7xJpa.js";const o=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[{"level":2,"title":"cookie字段","slug":"cookie字段","link":"#cookie字段","children":[{"level":3,"title":"js操作cookie","slug":"js操作cookie","link":"#js操作cookie","children":[]},{"level":3,"title":"浏览器开发者工具操作cookie","slug":"浏览器开发者工具操作cookie","link":"#浏览器开发者工具操作cookie","children":[]},{"level":3,"title":"服务器操作cookie","slug":"服务器操作cookie","link":"#服务器操作cookie","children":[]}]},{"level":2,"title":"storage","slug":"storage","link":"#storage","children":[]}],"relativePath":"frontend/cookie.md","filePath":"frontend/cookie.md"}');const p=s({name:"frontend/cookie.md"},[["render",function(s,o,p,e,t,c){return l(),n("div",null,o[0]||(o[0]=[a('<h2 id="cookie字段" tabindex="-1">cookie字段 <a class="header-anchor" href="#cookie字段" aria-label="Permalink to &quot;cookie字段&quot;">​</a></h2><h3 id="js操作cookie" tabindex="-1">js操作cookie <a class="header-anchor" href="#js操作cookie" aria-label="Permalink to &quot;js操作cookie&quot;">​</a></h3><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;">//添加cookie</span></span>\n<span class="line"><span style="color:#E1E4E8;">document.cookie</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;name=feng&quot;</span></span>\n<span class="line"><span style="color:#6A737D;">//修改cookie</span></span>\n<span class="line"><span style="color:#E1E4E8;"> document.cookie</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;name=feng1&quot;</span></span>\n<span class="line"><span style="color:#6A737D;">//删除cookie</span></span>\n<span class="line"><span style="color:#6A737D;">//通过expires和max-age来删除</span></span></code></pre></div><h3 id="浏览器开发者工具操作cookie" tabindex="-1">浏览器开发者工具操作cookie <a class="header-anchor" href="#浏览器开发者工具操作cookie" aria-label="Permalink to &quot;浏览器开发者工具操作cookie&quot;">​</a></h3><h3 id="服务器操作cookie" tabindex="-1">服务器操作cookie <a class="header-anchor" href="#服务器操作cookie" aria-label="Permalink to &quot;服务器操作cookie&quot;">​</a></h3><p>服务器添加 设置头 set-cookie sessionId=123</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> javax.servlet.http.Cookie;</span></span>\n<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> javax.servlet.http.HttpServletResponse;</span></span>\n<span class="line"><span style="color:#6A737D;">/**</span></span>\n<span class="line"><span style="color:#6A737D;"> * Cookie工具类</span></span>\n<span class="line"><span style="color:#6A737D;"> */</span></span>\n<span class="line"><span style="color:#F97583;">public</span><span style="color:#F97583;"> class</span><span style="color:#B392F0;"> CookieUtil</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#6A737D;">    /**</span></span>\n<span class="line"><span style="color:#6A737D;">     * 设置HttpOnly Cookie</span></span>\n<span class="line"><span style="color:#6A737D;">     * </span><span style="color:#F97583;">@param</span><span style="color:#FFAB70;"> response</span><span style="color:#6A737D;"> HTTP响应</span></span>\n<span class="line"><span style="color:#6A737D;">     * </span><span style="color:#F97583;">@param</span><span style="color:#FFAB70;"> cookie</span><span style="color:#6A737D;"> Cookie对象</span></span>\n<span class="line"><span style="color:#6A737D;">     * </span><span style="color:#F97583;">@param</span><span style="color:#FFAB70;"> isHTTPOnly</span><span style="color:#6A737D;"> 是否为HttpOnly</span></span>\n<span class="line"><span style="color:#6A737D;">     */</span></span>\n<span class="line"><span style="color:#F97583;">    public</span><span style="color:#F97583;"> static</span><span style="color:#F97583;"> void</span><span style="color:#B392F0;"> addCookie</span><span style="color:#E1E4E8;">(HttpServletResponse </span><span style="color:#FFAB70;">response</span><span style="color:#E1E4E8;">, Cookie </span><span style="color:#FFAB70;">cookie</span><span style="color:#E1E4E8;">, </span><span style="color:#F97583;">boolean</span><span style="color:#FFAB70;"> isHttpOnly</span><span style="color:#E1E4E8;">) {</span></span>\n<span class="line"><span style="color:#E1E4E8;">        String name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> cookie.</span><span style="color:#B392F0;">getName</span><span style="color:#E1E4E8;">();</span><span style="color:#6A737D;">//Cookie名称</span></span>\n<span class="line"><span style="color:#E1E4E8;">        String value </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> cookie.</span><span style="color:#B392F0;">getValue</span><span style="color:#E1E4E8;">();</span><span style="color:#6A737D;">//Cookie值</span></span>\n<span class="line"><span style="color:#F97583;">        int</span><span style="color:#E1E4E8;"> maxAge </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> cookie.</span><span style="color:#B392F0;">getMaxAge</span><span style="color:#E1E4E8;">();</span><span style="color:#6A737D;">//最大生存时间(毫秒,0代表删除,-1代表与浏览器会话一致)</span></span>\n<span class="line"><span style="color:#E1E4E8;">        String path </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> cookie.</span><span style="color:#B392F0;">getPath</span><span style="color:#E1E4E8;">();</span><span style="color:#6A737D;">//路径</span></span>\n<span class="line"><span style="color:#E1E4E8;">        String domain </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> cookie.</span><span style="color:#B392F0;">getDomain</span><span style="color:#E1E4E8;">();</span><span style="color:#6A737D;">//域</span></span>\n<span class="line"><span style="color:#F97583;">        boolean</span><span style="color:#E1E4E8;"> isSecure </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> cookie.</span><span style="color:#B392F0;">getSecure</span><span style="color:#E1E4E8;">();</span><span style="color:#6A737D;">//是否为安全协议信息</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#E1E4E8;">        StringBuilder buffer </span><span style="color:#F97583;">=</span><span style="color:#F97583;"> new</span><span style="color:#B392F0;"> StringBuilder</span><span style="color:#E1E4E8;">();</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#E1E4E8;">        buffer.</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(name).</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;=&quot;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(value).</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;;&quot;</span><span style="color:#E1E4E8;">);</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583;">        if</span><span style="color:#E1E4E8;"> (maxAge </span><span style="color:#F97583;">==</span><span style="color:#79B8FF;"> 0</span><span style="color:#E1E4E8;">) {</span></span>\n<span class="line"><span style="color:#E1E4E8;">            buffer.</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Expires=Thu Jan 01 08:00:00 CST 1970;&quot;</span><span style="color:#E1E4E8;">);</span></span>\n<span class="line"><span style="color:#E1E4E8;">        } </span><span style="color:#F97583;">else</span><span style="color:#F97583;"> if</span><span style="color:#E1E4E8;"> (maxAge </span><span style="color:#F97583;">&gt;</span><span style="color:#79B8FF;"> 0</span><span style="color:#E1E4E8;">) {</span></span>\n<span class="line"><span style="color:#E1E4E8;">            buffer.</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Max-Age=&quot;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(maxAge).</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;;&quot;</span><span style="color:#E1E4E8;">);</span></span>\n<span class="line"><span style="color:#E1E4E8;">        }</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583;">        if</span><span style="color:#E1E4E8;"> (domain </span><span style="color:#F97583;">!=</span><span style="color:#79B8FF;"> null</span><span style="color:#E1E4E8;">) {</span></span>\n<span class="line"><span style="color:#E1E4E8;">            buffer.</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;domain=&quot;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(domain).</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;;&quot;</span><span style="color:#E1E4E8;">);</span></span>\n<span class="line"><span style="color:#E1E4E8;">        }</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583;">        if</span><span style="color:#E1E4E8;"> (path </span><span style="color:#F97583;">!=</span><span style="color:#79B8FF;"> null</span><span style="color:#E1E4E8;">) {</span></span>\n<span class="line"><span style="color:#E1E4E8;">            buffer.</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;path=&quot;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(path).</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;;&quot;</span><span style="color:#E1E4E8;">);</span></span>\n<span class="line"><span style="color:#E1E4E8;">        }</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583;">        if</span><span style="color:#E1E4E8;"> (isSecure) {</span></span>\n<span class="line"><span style="color:#E1E4E8;">            buffer.</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;secure;&quot;</span><span style="color:#E1E4E8;">);</span></span>\n<span class="line"><span style="color:#E1E4E8;">        }</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583;">        if</span><span style="color:#E1E4E8;"> (isHttpOnly) {</span></span>\n<span class="line"><span style="color:#E1E4E8;">            buffer.</span><span style="color:#B392F0;">append</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;HTTPOnly;&quot;</span><span style="color:#E1E4E8;">);</span></span>\n<span class="line"><span style="color:#E1E4E8;">        }</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#E1E4E8;">        response.</span><span style="color:#B392F0;">addHeader</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;Set-Cookie&quot;</span><span style="color:#E1E4E8;">, buffer.</span><span style="color:#B392F0;">toString</span><span style="color:#E1E4E8;">());</span></span>\n<span class="line"><span style="color:#E1E4E8;">    }</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre></div><h2 id="storage" tabindex="-1">storage <a class="header-anchor" href="#storage" aria-label="Permalink to &quot;storage&quot;">​</a></h2><div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">interface</span><span style="color:#B392F0;"> Storage</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#6A737D;">    /**</span></span>\n<span class="line"><span style="color:#6A737D;">     * Returns the number of key/value pairs currently present in the list associated with the object.</span></span>\n<span class="line"><span style="color:#6A737D;">     */</span></span>\n<span class="line"><span style="color:#F97583;">    readonly</span><span style="color:#FFAB70;"> length</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> number</span><span style="color:#E1E4E8;">;</span></span>\n<span class="line"><span style="color:#6A737D;">    /**</span></span>\n<span class="line"><span style="color:#6A737D;">     * Empties the list associated with the object of all key/value pairs, if there are any.</span></span>\n<span class="line"><span style="color:#6A737D;">     */</span></span>\n<span class="line"><span style="color:#B392F0;">    clear</span><span style="color:#E1E4E8;">()</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span><span style="color:#E1E4E8;">;</span></span>\n<span class="line"><span style="color:#6A737D;">    /**</span></span>\n<span class="line"><span style="color:#6A737D;">     * Returns the current value associated with the given key, or null if the given key does not exist in the list associated with the object.</span></span>\n<span class="line"><span style="color:#6A737D;">     */</span></span>\n<span class="line"><span style="color:#B392F0;">    getItem</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">key</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> string</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> string</span><span style="color:#F97583;"> |</span><span style="color:#79B8FF;"> null</span><span style="color:#E1E4E8;">;</span></span>\n<span class="line"><span style="color:#6A737D;">    /**</span></span>\n<span class="line"><span style="color:#6A737D;">     * Returns the name of the nth key in the list, or null if n is greater than or equal to the number of key/value pairs in the object.</span></span>\n<span class="line"><span style="color:#6A737D;">     */</span></span>\n<span class="line"><span style="color:#B392F0;">    key</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">index</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> number</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> string</span><span style="color:#F97583;"> |</span><span style="color:#79B8FF;"> null</span><span style="color:#E1E4E8;">;</span></span>\n<span class="line"><span style="color:#6A737D;">    /**</span></span>\n<span class="line"><span style="color:#6A737D;">     * Removes the key/value pair with the given key from the list associated with the object, if a key/value pair with the given key exists.</span></span>\n<span class="line"><span style="color:#6A737D;">     */</span></span>\n<span class="line"><span style="color:#B392F0;">    removeItem</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">key</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> string</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span><span style="color:#E1E4E8;">;</span></span>\n<span class="line"><span style="color:#6A737D;">    /**</span></span>\n<span class="line"><span style="color:#6A737D;">     * Sets the value of the pair identified by key to value, creating a new key/value pair if none existed for key previously.</span></span>\n<span class="line"><span style="color:#6A737D;">     *</span></span>\n<span class="line"><span style="color:#6A737D;">     * Throws a &quot;QuotaExceededError&quot; DOMException exception if the new value couldn&#39;t be set. (Setting could fail if, e.g., the user has disabled storage for the site, or if the quota has been exceeded.)</span></span>\n<span class="line"><span style="color:#6A737D;">     */</span></span>\n<span class="line"><span style="color:#B392F0;">    setItem</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">key</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> string</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">value</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> string</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> void</span><span style="color:#E1E4E8;">;</span></span>\n<span class="line"><span style="color:#E1E4E8;">    [</span><span style="color:#FFAB70;">name</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> string</span><span style="color:#E1E4E8;">]</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;"> any</span><span style="color:#E1E4E8;">;</span></span>\n<span class="line"><span style="color:#E1E4E8;">}</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#F97583;">declare</span><span style="color:#F97583;"> var</span><span style="color:#E1E4E8;"> sessionStorage</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> Storage</span><span style="color:#E1E4E8;">;</span></span>\n<span class="line"><span style="color:#F97583;">declare</span><span style="color:#F97583;"> var</span><span style="color:#E1E4E8;"> localStorage</span><span style="color:#F97583;">:</span><span style="color:#B392F0;"> Storage</span><span style="color:#E1E4E8;">;</span></span></code></pre></div><p><img src="/assets/%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8.DWdtjKB9.png" alt="数据存储"></p><table tabindex="0"><thead><tr><th style="text-align:left;">特性</th><th style="text-align:left;">cookie</th><th style="text-align:left;">localStorage</th><th style="text-align:left;">sessionStorage</th><th style="text-align:left;">indexDB</th></tr></thead><tbody><tr><td style="text-align:left;">数据生命周期</td><td style="text-align:left;">一般由服务器生成，可以设置过期时间</td><td style="text-align:left;">除非被清理，否则一直存在</td><td style="text-align:left;">domain/path匹配不到tab页时清除</td><td style="text-align:left;">除非被清理，否则一直存在</td></tr><tr><td style="text-align:left;">数据存储大小</td><td style="text-align:left;">4K</td><td style="text-align:left;">5M</td><td style="text-align:left;">5M</td><td style="text-align:left;">无限</td></tr><tr><td style="text-align:left;">与服务端通信</td><td style="text-align:left;">每次都会携带在 header 中，对于请求性能影响</td><td style="text-align:left;">不参与</td><td style="text-align:left;">不参与</td><td style="text-align:left;">不参与</td></tr></tbody></table>',11)]))}]]);export{o as __pageData,p as default};
