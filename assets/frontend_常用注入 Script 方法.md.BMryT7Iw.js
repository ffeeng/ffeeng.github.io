import{_ as s,c as a,b as n,o as l}from"./chunks/framework.CUf7xJpa.js";const p=JSON.parse('{"title":"常用注入 Script 方法","description":"","frontmatter":{},"headers":[{"level":2,"title":"1. 背景","slug":"_1-背景","link":"#_1-背景","children":[]},{"level":2,"title":"2. 常用方法","slug":"_2-常用方法","link":"#_2-常用方法","children":[]},{"level":2,"title":"2.1. 工具包的注入","slug":"_2-1-工具包的注入","link":"#_2-1-工具包的注入","children":[]},{"level":2,"title":"2.2. 脚本的注入","slug":"_2-2-脚本的注入","link":"#_2-2-脚本的注入","children":[{"level":3,"title":"2.2.1. 直接 DevTools 执行","slug":"_2-2-1-直接-devtools-执行","link":"#_2-2-1-直接-devtools-执行","children":[]},{"level":3,"title":"2.2.2. 直接在地址栏执行","slug":"_2-2-2-直接在地址栏执行","link":"#_2-2-2-直接在地址栏执行","children":[]},{"level":3,"title":"2.2.3. 书签执行","slug":"_2-2-3-书签执行","link":"#_2-2-3-书签执行","children":[]}]}],"relativePath":"frontend/常用注入 Script 方法.md","filePath":"frontend/常用注入 Script 方法.md"}');const o=s({name:"frontend/常用注入 Script 方法.md"},[["render",function(s,p,o,e,t,c){return l(),a("div",null,p[0]||(p[0]=[n('<h1 id="常用注入-script-方法" tabindex="-1">常用注入 Script 方法 <a class="header-anchor" href="#常用注入-script-方法" aria-label="Permalink to &quot;常用注入 Script 方法&quot;">​</a></h1><h2 id="_1-背景" tabindex="-1">1. 背景 <a class="header-anchor" href="#_1-背景" aria-label="Permalink to &quot;1. 背景&quot;">​</a></h2><ul><li>如果你想在当前的页面，试一下某个 JS 工具库，而这个工具库恰好你没安装。（如 lodash）</li><li>如果你想分享一段脚本给别人，而又不希望别人在执行的过程太过麻烦。（如你写了一段恢复复制和右键功能的脚本）</li></ul><p>那下面的方法你可以尝试一下。</p><h2 id="_2-常用方法" tabindex="-1">2. 常用方法 <a class="header-anchor" href="#_2-常用方法" aria-label="Permalink to &quot;2. 常用方法&quot;">​</a></h2><p>主要方法有如下。</p><h2 id="_2-1-工具包的注入" tabindex="-1">2.1. 工具包的注入 <a class="header-anchor" href="#_2-1-工具包的注入" aria-label="Permalink to &quot;2.1. 工具包的注入&quot;">​</a></h2><p>复制如下代码，在 DevTools 中执行就可以了：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#B392F0;"> ls</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">src</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">callback</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">prefix</span><span style="color:#F97583;"> =</span><span style="color:#9ECBFF;"> &quot;https://unpkg.com/&quot;</span><span style="color:#E1E4E8;">) {</span></span>\n<span class="line"><span style="color:#F97583;">  var</span><span style="color:#E1E4E8;"> _script </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">createElement</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;script&quot;</span><span style="color:#E1E4E8;">);</span></span>\n<span class="line"><span style="color:#E1E4E8;">  _script.src </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> prefix </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> src;</span></span>\n<span class="line"><span style="color:#E1E4E8;">  _script.</span><span style="color:#B392F0;">onload</span><span style="color:#F97583;"> =</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;===&gt; 加载完成&quot;</span><span style="color:#E1E4E8;">, src);</span></span>\n<span class="line"><span style="color:#E1E4E8;">    callback </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#B392F0;"> callback</span><span style="color:#E1E4E8;">();</span></span>\n<span class="line"><span style="color:#E1E4E8;">  };</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#E1E4E8;">  document.head.</span><span style="color:#B392F0;">appendChild</span><span style="color:#E1E4E8;">(_script);</span></span>\n<span class="line"><span style="color:#E1E4E8;">}</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;工具包名&quot;</span><span style="color:#E1E4E8;">);</span></span></code></pre></div><p>如 lodash、jquery、dayjs：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;lodash&quot;</span><span style="color:#E1E4E8;">, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#E1E4E8;">\tconsole.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;load:&#39;</span><span style="color:#E1E4E8;">, _)</span></span>\n<span class="line"><span style="color:#E1E4E8;">});</span></span>\n<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;jquery&quot;</span><span style="color:#E1E4E8;">, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#E1E4E8;">\tconsole.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;load:&#39;</span><span style="color:#E1E4E8;">, $)</span></span>\n<span class="line"><span style="color:#E1E4E8;">});</span></span>\n<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;dayjs&quot;</span><span style="color:#E1E4E8;">, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#E1E4E8;">\tconsole.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;load:&#39;</span><span style="color:#E1E4E8;">, dayjs)</span></span>\n<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><p>使用其他源：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;react/umd/react.production.min.js&quot;</span><span style="color:#E1E4E8;">, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#E1E4E8;">\tconsole.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;load:&#39;</span><span style="color:#E1E4E8;">, React)</span></span>\n<span class="line"><span style="color:#E1E4E8;">}, </span><span style="color:#9ECBFF;">&#39;https://unpkg.zhimg.com/&#39;</span><span style="color:#E1E4E8;">);</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#B392F0;">ls</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;xstate@4/dist/xstate.js&quot;</span><span style="color:#E1E4E8;">, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#E1E4E8;">\tconsole.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;load:&#39;</span><span style="color:#E1E4E8;">, XState)</span></span>\n<span class="line"><span style="color:#E1E4E8;">}, </span><span style="color:#9ECBFF;">&#39;https://cdn.jsdelivr.net/npm/&#39;</span><span style="color:#E1E4E8;">);</span></span></code></pre></div><h2 id="_2-2-脚本的注入" tabindex="-1">2.2. 脚本的注入 <a class="header-anchor" href="#_2-2-脚本的注入" aria-label="Permalink to &quot;2.2. 脚本的注入&quot;">​</a></h2><p>如下面这段清除水印及恢复右键、选取的脚本：</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code" tabindex="0"><code><span class="line"><span style="color:#E1E4E8;">[document, </span><span style="color:#F97583;">...</span><span style="color:#E1E4E8;">document.</span><span style="color:#B392F0;">getElementsByTagName</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;*&quot;</span><span style="color:#E1E4E8;">)].</span><span style="color:#B392F0;">map</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>\n<span class="line"><span style="color:#F97583;">  if</span><span style="color:#E1E4E8;"> (item.style) {</span></span>\n<span class="line"><span style="color:#E1E4E8;">    item.style.cssText </span><span style="color:#F97583;">+=</span><span style="color:#9ECBFF;"> &quot;user-select:auto!important;&quot;</span><span style="color:#E1E4E8;">;</span></span>\n<span class="line"><span style="color:#F97583;">    if</span><span style="color:#E1E4E8;"> (item.style.cssText.</span><span style="color:#B392F0;">indexOf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;url(&quot;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">&gt;=</span><span style="color:#79B8FF;"> 0</span><span style="color:#E1E4E8;">) {</span></span>\n<span class="line"><span style="color:#E1E4E8;">      item.style.cssText </span><span style="color:#F97583;">+=</span><span style="color:#9ECBFF;"> &quot;background:unset!important;&quot;</span><span style="color:#E1E4E8;">;</span></span>\n<span class="line"><span style="color:#E1E4E8;">    }</span></span>\n<span class="line"><span style="color:#E1E4E8;">  }</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#E1E4E8;">  item.oncontextmenu </span><span style="color:#F97583;">=</span></span>\n<span class="line"><span style="color:#E1E4E8;">    item.oncopy </span><span style="color:#F97583;">=</span></span>\n<span class="line"><span style="color:#E1E4E8;">    item.onselectstart </span><span style="color:#F97583;">=</span></span>\n<span class="line"><span style="color:#E1E4E8;">    item.οnpaste </span><span style="color:#F97583;">=</span></span>\n<span class="line"><span style="color:#E1E4E8;">    item.oncut </span><span style="color:#F97583;">=</span></span>\n<span class="line"><span style="color:#E1E4E8;">    item.onmousedown </span><span style="color:#F97583;">=</span></span>\n<span class="line"><span style="color:#F97583;">      function</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) {</span></span>\n<span class="line"><span style="color:#E1E4E8;">        e.</span><span style="color:#B392F0;">stopPropagation</span><span style="color:#E1E4E8;">();</span></span>\n<span class="line"><span style="color:#F97583;">        return</span><span style="color:#79B8FF;"> true</span><span style="color:#E1E4E8;">;</span></span>\n<span class="line"><span style="color:#E1E4E8;">      };</span></span>\n<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre></div><p>如果想分享给其他人使用，有如下方法：</p><h3 id="_2-2-1-直接-devtools-执行" tabindex="-1">2.2.1. 直接 DevTools 执行 <a class="header-anchor" href="#_2-2-1-直接-devtools-执行" aria-label="Permalink to &quot;2.2.1. 直接 DevTools 执行&quot;">​</a></h3><p>就是直接粘贴到 DevTools 的 Console 下，直接执行就可以了。</p><p>但这个比较麻烦，每次都要打开 DevTools 和 复制。</p><h3 id="_2-2-2-直接在地址栏执行" tabindex="-1">2.2.2. 直接在地址栏执行 <a class="header-anchor" href="#_2-2-2-直接在地址栏执行" aria-label="Permalink to &quot;2.2.2. 直接在地址栏执行&quot;">​</a></h3><p>在脚本前面加上 <code>javascript:</code>，然后直接粘贴在地址栏中，回车即可执行。</p><p><img src="https://user-images.githubusercontent.com/11046969/155868529-c1d9516b-8964-4d47-8b11-34cfff7d7e2c.png" alt="image"></p><p>比 2.2.1 少了一步打开 DevTools 的过程，但还是需要复制，且如果复制的内容包含 <code>javascript:</code>，地址拦会自动给你清除掉，除非你手动再输入一遍。</p><h3 id="_2-2-3-书签执行" tabindex="-1">2.2.3. 书签执行 <a class="header-anchor" href="#_2-2-3-书签执行" aria-label="Permalink to &quot;2.2.3. 书签执行&quot;">​</a></h3><p>地址栏执行的优化版。不过 只需要复制一次就可以了，后面不用再去复制。</p><ol><li>打开浏览器的书签管理：右上角设置 -&gt; 书签 -&gt; 书签管理器 （或者直接在地址栏中输入 <code>chrome://bookmarks/</code> 进行打开）</li><li>点击 添加新书签 ，打开弹窗</li><li><code>名称</code> 自行输入，<code>网址</code> 就是那段 <code>javascript:</code> 拼合的代码，保存。</li></ol><p><img src="https://user-images.githubusercontent.com/11046969/155868535-69bfb989-fc35-4eb8-95e3-b5c06d80afe9.png" alt="image"></p><p>然后，每次需要的时候，只需要点击一下书签就可以了：</p><p><img src="https://user-images.githubusercontent.com/11046969/155868540-ca52c5bd-649c-4130-9b97-74c81c635fbc.png" alt="image"></p>',30)]))}]]);export{p as __pageData,o as default};
